import{d as b,b as C,u as L,a as N,e as p,o as d,f as _,k as o,h as w,g as t,w as n,j as $,t as k,_ as h,r as m,G as E,F as g,q as x,A as B,H as V,I as A,D as S,p as J,m as U,J as W}from"./index-685ec899.js";const q={class:"sidebar"},D={class:"userinfo"},K=["src"],O={class:"el-dropdown-link"},T=b({__name:"index",setup(l){let s=C(),c=L(),e=N();const r=async()=>{await s.userLogout(),c.push({path:"/login",query:{redirect:e.path}})},a=()=>{c.push({path:"/home"})};return(u,v)=>{const i=p("el-dropdown-item"),f=p("el-dropdown-menu"),M=p("el-dropdown");return d(),_("div",q,[o("div",D,[o("img",{src:w(s).avatar,style:{width:"24px",height:"24px","border-radius":"50%"}},null,8,K),t(M,null,{dropdown:n(()=>[t(f,null,{default:n(()=>[t(i,{onClick:a},{default:n(()=>[$("返回首页")]),_:1}),t(i,{onClick:r},{default:n(()=>[$("退出登录")]),_:1})]),_:1})]),default:n(()=>[o("span",O,k(w(s).username),1)]),_:1})])])}}});const F=h(T,[["__scopeId","data-v-19c122f1"]]),H={class:"chat"},R={class:"chat-input"},j=["onKeyup"],z=b({__name:"index",setup(l){const s=m(""),c=m([]),e=m(null),r=()=>{s.value.trim()!==""&&(c.value.push({text:s.value,isMyMessage:!0}),e.value&&e.value.send(JSON.stringify({text:s.value})),s.value="")};return E(()=>{e.value=new WebSocket("ws://localhost:3000"),e.value.addEventListener("open",a=>{console.log("WebSocket连接已建立",a)}),e.value.addEventListener("message",a=>{try{const u=JSON.parse(a.data);c.value.push(u),console.log("回复消息为:",a.data)}catch(u){console.error("Error parsing JSON message:",u)}}),e.value.addEventListener("close",a=>{console.log("WebSocket连接已关闭",a)}),e.value.addEventListener("error",a=>{console.error("WebSocket连接发生错误",a)})}),(a,u)=>{const v=p("el-scrollbar");return d(),_("div",H,[t(v,{height:"500px",class:"chat-messages"},{default:n(()=>[(d(!0),_(g,null,x(c.value,(i,f)=>(d(),_("div",{key:f,class:S(["message",{"my-message":i.isMyMessage,"other-message":!i.isMyMessage}])},k(i.text),3))),128))]),_:1}),o("div",R,[B(o("input",{"onUpdate:modelValue":u[0]||(u[0]=i=>s.value=i),onKeyup:A(r,["enter"]),placeholder:"Type a message..."},null,40,j),[[V,s.value]])])])}}});const G=h(z,[["__scopeId","data-v-1bf075b1"]]),I="/qoiow.github.io/assets/favicon-f4980037.ico";const P={},y=l=>(J("data-v-b4ffe30e"),l=l(),U(),l),Q={class:"UserList"},X=y(()=>o("div",{class:"title"},"在线人数：103",-1)),Y=y(()=>o("div",{class:"item-lfet"},[o("img",{src:I,class:"actor"}),o("div",{class:"green-badge"})],-1)),Z=y(()=>o("div",{class:"name"},"张三",-1)),ee=[Y,Z];function se(l,s){return d(),_("div",Q,[X,(d(),_(g,null,x(2,(c,e)=>o("div",{class:"item",key:e},ee)),64))])}const te=h(P,[["render",se],["__scopeId","data-v-b4ffe30e"]]),oe={class:"chartlist"},ae=["onClick"],ne=W('<div class="left" data-v-1b68c4db><img src="'+I+'" class="actor" data-v-1b68c4db><div class="body" data-v-1b68c4db><div class="top" data-v-1b68c4db><div class="title" data-v-1b68c4db>聊天群</div><div class="card" data-v-1b68c4db>官方</div></div><div class="bottom" data-v-1b68c4db><div class="name" data-v-1b68c4db>张三:</div><div class="title" data-v-1b68c4db>哈哈哈</div></div></div></div><div class="time" data-v-1b68c4db>16:03</div>',2),ce=[ne],de=b({__name:"index",setup(l){const s=m(0),c=m(Array.from({length:2})),e=r=>{s.value=r};return(r,a)=>(d(),_("div",oe,[(d(!0),_(g,null,x(c.value,(u,v)=>(d(),_("div",{key:v},[o("div",{class:S(["item",{menuItem_active:s.value===v}]),onClick:i=>e(v)},ce,10,ae)]))),128))]))}});const _e=h(de,[["__scopeId","data-v-1b68c4db"]]),ie={class:"homePage"},le={class:"windows"},re={class:"windows-body"},ue=b({__name:"index",setup(l){return(s,c)=>{const e=p("el-col"),r=p("el-row");return d(),_("div",ie,[o("div",le,[o("div",re,[t(r,{gutter:20},{default:n(()=>[t(e,{span:3},{default:n(()=>[t(F)]),_:1}),t(e,{span:5},{default:n(()=>[t(_e)]),_:1}),t(e,{span:12},{default:n(()=>[t(G)]),_:1}),t(e,{span:4},{default:n(()=>[t(te)]),_:1})]),_:1})])])])}}});const pe=h(ue,[["__scopeId","data-v-699235e1"]]);export{pe as default};
